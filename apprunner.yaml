version: 1.0
runtime: nodejs22
build:
  commands:
    pre-build:
      - npm ci
    build:
      - npm run build
run:
  command: npm run start
  network:
    port: 3000
    env: PORT
  env:
    - name: NODE_ENV
      value: "production"
    - name: PORT
      value: "3000"
  secrets: 
    - name: TURSO_DATABASE_URL
      value-from: "arn:aws:secretsmanager:us-west-2:465631958128:secret:prod/SocketShoppingList/envs-4QXVfA:TURSO_DATABASE_URL::" 
    - name: TURSO_AUTH_TOKEN
      value-from: "arn:aws:secretsmanager:us-west-2:465631958128:secret:prod/SocketShoppingList/envs-4QXVfA:TURSO_AUTH_TOKEN::" 
    - name: OPENAI_API_KEY
      value-from: "arn:aws:secretsmanager:us-west-2:465631958128:secret:prod/SocketShoppingList/envs-4QXVfA:OPENAI_API_KEY::" 